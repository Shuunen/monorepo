/* unique-mark : 0.0.1 - 020b136 - 15/01/2026 17:48 */
import{w as Qt}from"./chunk-EPOLDU6W-BX2fZM7Z.js";import{b as bt,j as b}from"./index-Dura0Zb_.js";import{_ as ct,s as P,o as J,b as O,n as te,f as ee,a as St}from"./form-field-upload.const-zFp1Gjmm.js";import{A as ne,D as se}from"./auto-form-CQPIzEGB.js";import{f as v,s as B,m as ie}from"./auto-form.utils-BE3pKRFx.js";import{a as re}from"./age.utils-BFQTLvEs.js";import"./button-CsmJcW-8.js";import"./createLucideIcon-LJl3LYkS.js";import"./triangle-alert-B-Mr_fRh.js";function oe(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function ce(){const e=oe();if(e.__xstate__)return e.__xstate__}const ae=e=>{if(typeof window>"u")return;const t=ce();t&&t.register(e)};class xt{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const n={value:t,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const Ct=".",ue="",Ot="",fe="#",de="*",jt="xstate.init",le="xstate.error",Q="xstate.stop";function he(e,t){return{type:`xstate.after.${e}.${t}`}}function tt(e,t){return{type:`xstate.done.state.${e}`,output:t}}function pe(e,t){return{type:`xstate.done.actor.${e}`,output:t,actorId:e}}function Mt(e,t){return{type:`xstate.error.actor.${e}`,error:t,actorId:e}}function Rt(e){return{type:jt,input:e}}function _(e){setTimeout(()=>{throw e})}const ye=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qt(e,t){const n=wt(e),s=wt(t);return typeof s=="string"?typeof n=="string"?s===n:!1:typeof n=="string"?n in s:Object.keys(n).every(i=>i in s?qt(n[i],s[i]):!1)}function at(e){if(Jt(e))return e;const t=[];let n="";for(let s=0;s<e.length;s++){switch(e.charCodeAt(s)){case 92:n+=e[s+1],s++;continue;case 46:t.push(n),n="";continue}n+=e[s]}return t.push(n),t}function wt(e){if(Ye(e))return e.value;if(typeof e!="string")return e;const t=at(e);return ge(t)}function ge(e){if(e.length===1)return e[0];const t={};let n=t;for(let s=0;s<e.length-1;s++)if(s===e.length-2)n[e[s]]=e[s+1];else{const i=n;n={},i[e[s]]=n}return t}function Tt(e,t){const n={},s=Object.keys(e);for(let i=0;i<s.length;i++){const r=s[i];n[r]=t(e[r],r,e,i)}return n}function Lt(e){return Jt(e)?e:[e]}function x(e){return e===void 0?[]:Lt(e)}function et(e,t,n,s){return typeof e=="function"?e({context:t,event:n,self:s}):e}function Jt(e){return Array.isArray(e)}function me(e){return e.type.startsWith("xstate.error.actor")}function $(e){return Lt(e).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function Bt(e){if(!(e===void 0||e===ue))return x(e)}function nt(e,t,n){const s=typeof e=="object",i=s?e:void 0;return{next:(s?e.next:e)?.bind(i),error:(s?e.error:t)?.bind(i),complete:(s?e.complete:n)?.bind(i)}}function Et(e,t){return`${t}.${e}`}function ut(e,t){const n=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return e.implementations.actors[t];const[,s,i]=n,o=e.getStateNodeById(i).config.invoke;return(Array.isArray(o)?o[s]:o).src}function ve(e,t){if(t===e||t===de)return!0;if(!t.endsWith(".*"))return!1;const n=t.split("."),s=e.split(".");for(let i=0;i<n.length;i++){const r=n[i],o=s[i];if(r==="*")return i===n.length-1;if(r!==o)return!1}return!0}function At(e,t){return`${e.sessionId}.${t}`}let _e=0;function be(e,t){const n=new Map,s=new Map,i=new WeakMap,r=new Set,o={},{clock:c,logger:u}=t,d={schedule:(a,l,h,y,g=Math.random().toString(36).slice(2))=>{const I={source:a,target:l,event:h,delay:y,id:g,startedAt:Date.now()},k=At(a,g);f._snapshot._scheduledEvents[k]=I;const Vt=c.setTimeout(()=>{delete o[k],delete f._snapshot._scheduledEvents[k],f._relay(a,l,h)},y);o[k]=Vt},cancel:(a,l)=>{const h=At(a,l),y=o[h];delete o[h],delete f._snapshot._scheduledEvents[h],y!==void 0&&c.clearTimeout(y)},cancelAll:a=>{for(const l in f._snapshot._scheduledEvents){const h=f._snapshot._scheduledEvents[l];h.source===a&&d.cancel(a,h.id)}}},p=a=>{if(!r.size)return;const l={...a,rootId:e.sessionId};r.forEach(h=>h.next?.(l))},f={_snapshot:{_scheduledEvents:(t?.snapshot&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${_e++}`,_register:(a,l)=>(n.set(a,l),a),_unregister:a=>{n.delete(a.sessionId);const l=i.get(a);l!==void 0&&(s.delete(l),i.delete(a))},get:a=>s.get(a),getAll:()=>Object.fromEntries(s.entries()),_set:(a,l)=>{const h=s.get(a);if(h&&h!==l)throw new Error(`Actor with system ID '${a}' already exists.`);s.set(a,l),i.set(l,a)},inspect:a=>{const l=nt(a);return r.add(l),{unsubscribe(){r.delete(l)}}},_sendInspectionEvent:p,_relay:(a,l,h)=>{f._sendInspectionEvent({type:"@xstate.event",sourceRef:a,actorRef:l,event:h}),l._send(h)},scheduler:d,getSnapshot:()=>({_scheduledEvents:{...f._snapshot._scheduledEvents}}),start:()=>{const a=f._snapshot._scheduledEvents;f._snapshot._scheduledEvents={};for(const l in a){const{source:h,target:y,event:g,delay:I,id:k}=a[l];d.schedule(h,y,g,I,k)}},_clock:c,_logger:u};return f}let Z=!1;const ft=1;let m=(function(e){return e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped",e})({});const Se={clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class xe{constructor(t,n){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new xt(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=m.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const s={...Se,...n},{clock:i,logger:r,parent:o,syncSnapshot:c,id:u,systemId:d,inspect:p}=s;this.system=o?o.system:be(this,{clock:i,logger:r}),p&&!o&&this.system.inspect(nt(p)),this.sessionId=this.system._bookId(),this.id=u??this.sessionId,this.logger=n?.logger??this.system._logger,this.clock=n?.clock??this.system._clock,this._parent=o,this._syncSnapshot=c,this.options=s,this.src=s.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:f=>{this._deferred.push(f)},system:this.system,stopChild:f=>{if(f._parent!==this)throw new Error(`Cannot stop child actor ${f.id} of ${this.id} because it is not a child`);f._stop()},emit:f=>{const a=this.eventListeners.get(f.type),l=this.eventListeners.get("*");if(!a&&!l)return;const h=[...a?a.values():[],...l?l.values():[]];for(const y of h)try{y(f)}catch(g){_(g)}},actionExecutor:f=>{const a=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:f.type,params:f.params}}),!f.exec)return;const l=Z;try{Z=!0,f.exec(f.info,f.params)}finally{Z=l}};this._processingStatus===m.Running?a():this._deferred.push(a)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),d&&(this.systemId=d,this.system._set(d,this)),this._initState(n?.snapshot??n?.state),d&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(n){this._snapshot={status:"error",output:void 0,error:n}}}update(t,n){this._snapshot=t;let s;for(;s=this._deferred.shift();)try{s()}catch(i){this._deferred.length=0,this._snapshot={...t,status:"error",error:i}}switch(this._snapshot.status){case"active":for(const i of this.observers)try{i.next?.(t)}catch(r){_(r)}break;case"done":for(const i of this.observers)try{i.next?.(t)}catch(r){_(r)}this._stopProcedure(),this._complete(),this._doneEvent=pe(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:t})}subscribe(t,n,s){const i=nt(t,n,s);if(this._processingStatus!==m.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{i.complete?.()}catch(r){_(r)}break;case"error":{const r=this._snapshot.error;if(!i.error)_(r);else try{i.error(r)}catch(o){_(o)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(t,n){let s=this.eventListeners.get(t);s||(s=new Set,this.eventListeners.set(t,s));const i=n.bind(void 0);return s.add(i),{unsubscribe:()=>{s.delete(i)}}}start(){if(this._processingStatus===m.Running)return this;this._syncSnapshot&&this.subscribe({next:s=>{s.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:s})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=m.Running;const t=Rt(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(s){return this._snapshot={...this._snapshot,status:"error",error:s},this._error(s),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let n,s;try{n=this.logic.transition(this._snapshot,t,this._actorScope)}catch(i){s={err:i}}if(s){const{err:i}=s;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,t),t.type===Q&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===m.Stopped?this:(this.mailbox.clear(),this._processingStatus===m.NotStarted?(this._processingStatus=m.Stopped,this):(this.mailbox.enqueue({type:Q}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const t of this.observers)try{t.complete?.()}catch(n){_(n)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||_(t);return}let n=!1;for(const s of this.observers){const i=s.error;n||=!i;try{i?.(t)}catch(r){_(r)}}this.observers.clear(),n&&_(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,Mt(this.id,t))}_stopProcedure(){return this._processingStatus!==m.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new xt(this._process.bind(this)),this._processingStatus=m.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==m.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:ae)(this)}toJSON(){return{xstate$$type:ft,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[ye](){return this}getSnapshot(){return this._snapshot}}function L(e,...[t]){return new xe(e,t)}function we(e,t,n,s,{sendId:i}){const r=typeof i=="function"?i(n,s):i;return[t,{sendId:r},void 0]}function Te(e,t){e.defer(()=>{e.system.scheduler.cancel(e.self,t.sendId)})}function dt(e){function t(n,s){}return t.type="xstate.cancel",t.sendId=e,t.resolve=we,t.execute=Te,t}function Ee(e,t,n,s,{id:i,systemId:r,src:o,input:c,syncSnapshot:u}){const d=typeof o=="string"?ut(t.machine,o):o,p=typeof i=="function"?i(n):i;let f,a;return d&&(a=typeof c=="function"?c({context:t.context,event:n.event,self:e.self}):c,f=L(d,{id:p,src:o,parent:e.self,syncSnapshot:u,systemId:r,input:a})),[A(t,{children:{...t.children,[p]:f}}),{id:i,systemId:r,actorRef:f,src:o,input:a},void 0]}function Ae(e,{actorRef:t}){t&&e.defer(()=>{t._processingStatus!==m.Stopped&&t.start()})}function lt(...[e,{id:t,systemId:n,input:s,syncSnapshot:i=!1}={}]){function r(o,c){}return r.type="xstate.spawnChild",r.id=t,r.systemId=n,r.src=e,r.input=s,r.syncSnapshot=i,r.resolve=Ee,r.execute=Ae,r}function Ie(e,t,n,s,{actorRef:i}){const r=typeof i=="function"?i(n,s):i,o=typeof r=="string"?t.children[r]:r;let c=t.children;return o&&(c={...c},delete c[o.id]),[A(t,{children:c}),o,void 0]}function ke(e,t){if(t){if(e.system._unregister(t),t._processingStatus!==m.Running){e.stopChild(t);return}e.defer(()=>{e.stopChild(t)})}}function X(e){function t(n,s){}return t.type="xstate.stopChild",t.actorRef=e,t.resolve=Ie,t.execute=ke,t}function Y(e,t,n,s){const{machine:i}=s,r=typeof e=="function",o=r?e:i.implementations.guards[typeof e=="string"?e:e.type];if(!r&&!o)throw new Error(`Guard '${typeof e=="string"?e:e.type}' is not implemented.'.`);if(typeof o!="function")return Y(o,t,n,s);const c={context:t,event:n},u=r||typeof e=="string"?void 0:"params"in e?typeof e.params=="function"?e.params({context:t,event:n}):e.params:void 0;return"check"in o?o.check(s,c,o):o(c,u)}const ht=e=>e.type==="atomic"||e.type==="final";function j(e){return Object.values(e.states).filter(t=>t.type!=="history")}function z(e,t){const n=[];if(t===e)return n;let s=e.parent;for(;s&&s!==t;)n.push(s),s=s.parent;return n}function W(e){const t=new Set(e),n=Ft(t);for(const s of t)if(s.type==="compound"&&(!n.get(s)||!n.get(s).length))It(s).forEach(i=>t.add(i));else if(s.type==="parallel"){for(const i of j(s))if(i.type!=="history"&&!t.has(i)){const r=It(i);for(const o of r)t.add(o)}}for(const s of t){let i=s.parent;for(;i;)t.add(i),i=i.parent}return t}function zt(e,t){const n=t.get(e);if(!n)return{};if(e.type==="compound"){const i=n[0];if(i){if(ht(i))return i.key}else return{}}const s={};for(const i of n)s[i.key]=zt(i,t);return s}function Ft(e){const t=new Map;for(const n of e)t.has(n)||t.set(n,[]),n.parent&&(t.has(n.parent)||t.set(n.parent,[]),t.get(n.parent).push(n));return t}function Pt(e,t){const n=W(t);return zt(e,Ft(n))}function pt(e,t){return t.type==="compound"?j(t).some(n=>n.type==="final"&&e.has(n)):t.type==="parallel"?j(t).every(n=>pt(e,n)):t.type==="final"}const K=e=>e[0]===fe;function De(e,t){return e.transitions.get(t)||[...e.transitions.keys()].filter(s=>ve(t,s)).sort((s,i)=>i.length-s.length).flatMap(s=>e.transitions.get(s))}function $e(e){const t=e.config.after;if(!t)return[];const n=i=>{const r=he(i,e.id),o=r.type;return e.entry.push(mt(r,{id:o,delay:i})),e.exit.push(dt(o)),o};return Object.keys(t).flatMap(i=>{const r=t[i],o=typeof r=="string"?{target:r}:r,c=Number.isNaN(+i)?i:+i,u=n(c);return x(o).map(d=>({...d,event:u,delay:c}))}).map(i=>{const{delay:r}=i;return{...T(e,i.event,i),delay:r}})}function T(e,t,n){const s=Bt(n.target),i=n.reenter??!1,r=je(e,s),o={...n,actions:x(n.actions),guard:n.guard,target:r,source:e,reenter:i,eventType:t,toJSON:()=>({...o,source:`#${e.id}`,target:r?r.map(c=>`#${c.id}`):void 0})};return o}function Ce(e){const t=new Map;if(e.config.on)for(const n of Object.keys(e.config.on)){if(n===Ot)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const s=e.config.on[n];t.set(n,$(s).map(i=>T(e,n,i)))}if(e.config.onDone){const n=`xstate.done.state.${e.id}`;t.set(n,$(e.config.onDone).map(s=>T(e,n,s)))}for(const n of e.invoke){if(n.onDone){const s=`xstate.done.actor.${n.id}`;t.set(s,$(n.onDone).map(i=>T(e,s,i)))}if(n.onError){const s=`xstate.error.actor.${n.id}`;t.set(s,$(n.onError).map(i=>T(e,s,i)))}if(n.onSnapshot){const s=`xstate.snapshot.${n.id}`;t.set(s,$(n.onSnapshot).map(i=>T(e,s,i)))}}for(const n of e.after){let s=t.get(n.eventType);s||(s=[],t.set(n.eventType,s)),s.push(n)}return t}function Oe(e,t){const n=typeof t=="string"?e.states[t]:t?e.states[t.target]:void 0;if(!n&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${e.id}`);const s={source:e,actions:!t||typeof t=="string"?[]:x(t.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...s,source:`#${e.id}`,target:n?[`#${n.id}`]:[]})};return s}function je(e,t){if(t!==void 0)return t.map(n=>{if(typeof n!="string")return n;if(K(n))return e.machine.getStateNodeById(n);const s=n[0]===Ct;if(s&&!e.parent)return U(e,n.slice(1));const i=s?e.key+n:n;if(e.parent)try{return U(e.parent,i)}catch(r){throw new Error(`Invalid transition definition for state node '${e.id}':
${r.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function Wt(e){const t=Bt(e.config.target);return t?{target:t.map(n=>typeof n=="string"?U(e.parent,n):n)}:e.parent.initial}function E(e){return e.type==="history"}function It(e){const t=Ut(e);for(const n of t)for(const s of z(n,e))t.add(s);return t}function Ut(e){const t=new Set;function n(s){if(!t.has(s)){if(t.add(s),s.type==="compound")n(s.initial.target[0]);else if(s.type==="parallel")for(const i of j(s))n(i)}}return n(e),t}function M(e,t){if(K(t))return e.machine.getStateNodeById(t);if(!e.states)throw new Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);const n=e.states[t];if(!n)throw new Error(`Child state '${t}' does not exist on '${e.id}'`);return n}function U(e,t){if(typeof t=="string"&&K(t))try{return e.machine.getStateNodeById(t)}catch{}const n=at(t).slice();let s=e;for(;n.length;){const i=n.shift();if(!i.length)break;s=M(s,i)}return s}function G(e,t){if(typeof t=="string"){const i=e.states[t];if(!i)throw new Error(`State '${t}' does not exist on '${e.id}'`);return[e,i]}const n=Object.keys(t),s=n.map(i=>M(e,i)).filter(Boolean);return[e.machine.root,e].concat(s,n.reduce((i,r)=>{const o=M(e,r);if(!o)return i;const c=G(o,t[r]);return i.concat(c)},[]))}function Me(e,t,n,s){const r=M(e,t).next(n,s);return!r||!r.length?e.next(n,s):r}function Re(e,t,n,s){const i=Object.keys(t),r=M(e,i[0]),o=yt(r,t[i[0]],n,s);return!o||!o.length?e.next(n,s):o}function qe(e,t,n,s){const i=[];for(const r of Object.keys(t)){const o=t[r];if(!o)continue;const c=M(e,r),u=yt(c,o,n,s);u&&i.push(...u)}return i.length?i:e.next(n,s)}function yt(e,t,n,s){return typeof t=="string"?Me(e,t,n,s):Object.keys(t).length===1?Re(e,t,n,s):qe(e,t,n,s)}function Le(e){return Object.keys(e.states).map(t=>e.states[t]).filter(t=>t.type==="history")}function w(e,t){let n=e;for(;n.parent&&n.parent!==t;)n=n.parent;return n.parent===t}function Je(e,t){const n=new Set(e),s=new Set(t);for(const i of n)if(s.has(i))return!0;for(const i of s)if(n.has(i))return!0;return!1}function Gt(e,t,n){const s=new Set;for(const i of e){let r=!1;const o=new Set;for(const c of s)if(Je(st([i],t,n),st([c],t,n)))if(w(i.source,c.source))o.add(c);else{r=!0;break}if(!r){for(const c of o)s.delete(c);s.add(i)}}return Array.from(s)}function Be(e){const[t,...n]=e;for(const s of z(t,void 0))if(n.every(i=>w(i,s)))return s}function gt(e,t){if(!e.target)return[];const n=new Set;for(const s of e.target)if(E(s))if(t[s.id])for(const i of t[s.id])n.add(i);else for(const i of gt(Wt(s),t))n.add(i);else n.add(s);return[...n]}function Ht(e,t){const n=gt(e,t);if(!n)return;if(!e.reenter&&n.every(i=>i===e.source||w(i,e.source)))return e.source;const s=Be(n.concat(e.source));if(s)return s;if(!e.reenter)return e.source.machine.root}function st(e,t,n){const s=new Set;for(const i of e)if(i.target?.length){const r=Ht(i,n);i.reenter&&i.source===r&&s.add(r);for(const o of t)w(o,r)&&s.add(o)}return[...s]}function ze(e,t){if(e.length!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function it(e,t,n,s,i,r){if(!e.length)return t;const o=new Set(t._nodes);let c=t.historyValue;const u=Gt(e,o,c);let d=t;i||([d,c]=Ue(d,s,n,u,o,c,r,n.actionExecutor)),d=R(d,s,n,u.flatMap(f=>f.actions),r,void 0),d=Pe(d,s,n,u,o,r,c,i);const p=[...o];d.status==="done"&&(d=R(d,s,n,p.sort((f,a)=>a.order-f.order).flatMap(f=>f.exit),r,void 0));try{return c===t.historyValue&&ze(t._nodes,o)?d:A(d,{_nodes:p,historyValue:c})}catch(f){throw f}}function Fe(e,t,n,s,i){if(s.output===void 0)return;const r=tt(i.id,i.output!==void 0&&i.parent?et(i.output,e.context,t,n.self):void 0);return et(s.output,e.context,r,n.self)}function Pe(e,t,n,s,i,r,o,c){let u=e;const d=new Set,p=new Set;We(s,o,p,d),c&&p.add(e.machine.root);const f=new Set;for(const a of[...d].sort((l,h)=>l.order-h.order)){i.add(a);const l=[];l.push(...a.entry);for(const h of a.invoke)l.push(lt(h.src,{...h,syncSnapshot:!!h.onSnapshot}));if(p.has(a)){const h=a.initial.actions;l.push(...h)}if(u=R(u,t,n,l,r,a.invoke.map(h=>h.id)),a.type==="final"){const h=a.parent;let y=h?.type==="parallel"?h:h?.parent,g=y||a;for(h?.type==="compound"&&r.push(tt(h.id,a.output!==void 0?et(a.output,u.context,t,n.self):void 0));y?.type==="parallel"&&!f.has(y)&&pt(i,y);)f.add(y),r.push(tt(y.id)),g=y,y=y.parent;if(y)continue;u=A(u,{status:"done",output:Fe(u,t,n,u.machine.root,g)})}}return u}function We(e,t,n,s){for(const i of e){const r=Ht(i,t);for(const c of i.target||[])!E(c)&&(i.source!==c||i.source!==r||i.reenter)&&(s.add(c),n.add(c)),C(c,t,n,s);const o=gt(i,t);for(const c of o){const u=z(c,r);r?.type==="parallel"&&u.push(r),Xt(s,t,n,u,!i.source.parent&&i.reenter?void 0:r)}}}function C(e,t,n,s){if(E(e))if(t[e.id]){const i=t[e.id];for(const r of i)s.add(r),C(r,t,n,s);for(const r of i)N(r,e.parent,s,t,n)}else{const i=Wt(e);for(const r of i.target)s.add(r),i===e.parent?.initial&&n.add(e.parent),C(r,t,n,s);for(const r of i.target)N(r,e.parent,s,t,n)}else if(e.type==="compound"){const[i]=e.initial.target;E(i)||(s.add(i),n.add(i)),C(i,t,n,s),N(i,e,s,t,n)}else if(e.type==="parallel")for(const i of j(e).filter(r=>!E(r)))[...s].some(r=>w(r,i))||(E(i)||(s.add(i),n.add(i)),C(i,t,n,s))}function Xt(e,t,n,s,i){for(const r of s)if((!i||w(r,i))&&e.add(r),r.type==="parallel")for(const o of j(r).filter(c=>!E(c)))[...e].some(c=>w(c,o))||(e.add(o),C(o,t,n,e))}function N(e,t,n,s,i){Xt(n,s,i,z(e,t))}function Ue(e,t,n,s,i,r,o,c){let u=e;const d=st(s,i,r);d.sort((f,a)=>a.order-f.order);let p;for(const f of d)for(const a of Le(f)){let l;a.history==="deep"?l=h=>ht(h)&&w(h,f):l=h=>h.parent===f,p??={...r},p[a.id]=Array.from(i).filter(l)}for(const f of d)u=R(u,t,n,[...f.exit,...f.invoke.map(a=>X(a.id))],o,void 0),i.delete(f);return[u,p||r]}function Ge(e,t){return e.implementations.actions[t]}function Yt(e,t,n,s,i,r){const{machine:o}=e;let c=e;for(const u of s){const d=typeof u=="function",p=d?u:Ge(o,typeof u=="string"?u:u.type),f={context:c.context,event:t,self:n.self,system:n.system},a=d||typeof u=="string"?void 0:"params"in u?typeof u.params=="function"?u.params({context:c.context,event:t}):u.params:void 0;if(!p||!("resolve"in p)){n.actionExecutor({type:typeof u=="string"?u:typeof u=="object"?u.type:u.name||"(anonymous)",info:f,params:a,exec:p});continue}const l=p,[h,y,g]=l.resolve(n,c,f,a,p,i);c=h,"retryResolve"in l&&r?.push([l,y]),"execute"in l&&n.actionExecutor({type:l.type,info:f,params:y,exec:l.execute.bind(null,n,y)}),g&&(c=Yt(c,t,n,g,i,r))}return c}function R(e,t,n,s,i,r){const o=r?[]:void 0,c=Yt(e,t,n,s,{internalQueue:i,deferredActorIds:r},o);return o?.forEach(([u,d])=>{u.retryResolve(n,c,d)}),c}function V(e,t,n,s){let i=e;const r=[];function o(d,p,f){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:p,snapshot:d,_transitions:f}),r.push(d)}if(t.type===Q)return i=A(kt(i,t,n),{status:"stopped"}),o(i,t,[]),{snapshot:i,microstates:r};let c=t;if(c.type!==jt){const d=c,p=me(d),f=Dt(d,i);if(p&&!f.length)return i=A(e,{status:"error",error:d.error}),o(i,d,[]),{snapshot:i,microstates:r};i=it(f,e,n,c,!1,s),o(i,d,f)}let u=!0;for(;i.status==="active";){let d=u?He(i,c):[];const p=d.length?i:void 0;if(!d.length){if(!s.length)break;c=s.shift(),d=Dt(c,i)}i=it(d,i,n,c,!1,s),u=i!==p,o(i,c,d)}return i.status!=="active"&&kt(i,c,n),{snapshot:i,microstates:r}}function kt(e,t,n){return R(e,t,n,Object.values(e.children).map(s=>X(s)),[],void 0)}function Dt(e,t){return t.machine.getTransitionData(t,e)}function He(e,t){const n=new Set,s=e._nodes.filter(ht);for(const i of s)t:for(const r of[i].concat(z(i,void 0)))if(r.always){for(const o of r.always)if(o.guard===void 0||Y(o.guard,e.context,t,e)){n.add(o);break t}}return Gt(Array.from(n),new Set(e._nodes),e.historyValue)}function Xe(e,t){const n=W(G(e,t));return Pt(e,[...n])}function Ye(e){return!!e&&typeof e=="object"&&"machine"in e&&"value"in e}const Ke=function(t){return qt(t,this.value)},Ze=function(t){return this.tags.has(t)},Ne=function(t){const n=this.machine.getTransitionData(this,t);return!!n?.length&&n.some(s=>s.target!==void 0||s.actions.length)},Ve=function(){const{_nodes:t,tags:n,machine:s,getMeta:i,toJSON:r,can:o,hasTag:c,matches:u,...d}=this;return{...d,tags:Array.from(n)}},Qe=function(){return this._nodes.reduce((t,n)=>(n.meta!==void 0&&(t[n.id]=n.meta),t),{})};function F(e,t){return{status:e.status,output:e.output,error:e.error,machine:t,context:e.context,_nodes:e._nodes,value:Pt(t.root,e._nodes),tags:new Set(e._nodes.flatMap(n=>n.tags)),children:e.children,historyValue:e.historyValue||{},matches:Ke,hasTag:Ze,can:Ne,getMeta:Qe,toJSON:Ve}}function A(e,t={}){return F({...e,...t},e.machine)}function tn(e){if(typeof e!="object"||e===null)return{};const t={};for(const n in e){const s=e[n];Array.isArray(s)&&(t[n]=s.map(i=>({id:i.id})))}return t}function en(e,t){const{_nodes:n,tags:s,machine:i,children:r,context:o,can:c,hasTag:u,matches:d,getMeta:p,toJSON:f,...a}=e,l={};for(const y in r){const g=r[y];l[y]={snapshot:g.getPersistedSnapshot(t),src:g.src,systemId:g.systemId,syncSnapshot:g._syncSnapshot}}return{...a,context:Kt(o),children:l,historyValue:tn(a.historyValue)}}function Kt(e){let t;for(const n in e){const s=e[n];if(s&&typeof s=="object")if("sessionId"in s&&"send"in s&&"ref"in s)t??=Array.isArray(e)?e.slice():{...e},t[n]={xstate$$type:ft,id:s.id};else{const i=Kt(s);i!==s&&(t??=Array.isArray(e)?e.slice():{...e},t[n]=i)}}return t??e}function nn(e,t,n,s,{event:i,id:r,delay:o},{internalQueue:c}){const u=t.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const d=typeof i=="function"?i(n,s):i;let p;if(typeof o=="string"){const f=u&&u[o];p=typeof f=="function"?f(n,s):f}else p=typeof o=="function"?o(n,s):o;return typeof p!="number"&&c.push(d),[t,{event:d,id:r,delay:p},void 0]}function sn(e,t){const{event:n,delay:s,id:i}=t;if(typeof s=="number"){e.defer(()=>{const r=e.self;e.system.scheduler.schedule(r,r,n,s,i)});return}}function mt(e,t){function n(s,i){}return n.type="xstate.raise",n.event=e,n.id=t?.id,n.delay=t?.delay,n.resolve=nn,n.execute=sn,n}function rn(e,{machine:t,context:n},s,i){const r=(o,c)=>{if(typeof o=="string"){const u=ut(t,o);if(!u)throw new Error(`Actor logic '${o}' not implemented in machine '${t.id}'`);const d=L(u,{id:c?.id,parent:e.self,syncSnapshot:c?.syncSnapshot,input:typeof c?.input=="function"?c.input({context:n,event:s,self:e.self}):c?.input,src:o,systemId:c?.systemId});return i[d.id]=d,d}else return L(o,{id:c?.id,parent:e.self,syncSnapshot:c?.syncSnapshot,input:c?.input,src:o,systemId:c?.systemId})};return(o,c)=>{const u=r(o,c);return i[u.id]=u,e.defer(()=>{u._processingStatus!==m.Stopped&&u.start()}),u}}function on(e,t,n,s,{assignment:i}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const r={},o={context:t.context,event:n.event,spawn:rn(e,t,n.event,r),self:e.self,system:e.system};let c={};if(typeof i=="function")c=i(o,s);else for(const d of Object.keys(i)){const p=i[d];c[d]=typeof p=="function"?p(o,s):p}const u=Object.assign({},t.context,c);return[A(t,{context:u,children:Object.keys(r).length?{...t.children,...r}:t.children}),void 0,void 0]}function S(e){function t(n,s){}return t.type="xstate.assign",t.assignment=e,t.resolve=on,t}const $t=new WeakMap;function D(e,t,n){let s=$t.get(e);return s?t in s||(s[t]=n()):(s={[t]:n()},$t.set(e,s)),s[t]}const cn={},q=e=>typeof e=="string"?{type:e}:typeof e=="function"?"resolve"in e?{type:e.type}:{type:e.name}:e;class H{constructor(t,n){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Ct),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Tt(this.config.states,(s,i)=>new H(s,{_parent:this,_key:i,_machine:this.machine})):cn,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=x(this.config.entry).slice(),this.exit=x(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=x(t.tags).slice()}_initialize(){this.transitions=Ce(this),this.config.always&&(this.always=$(this.config.always).map(t=>T(this,Ot,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(q),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(q),eventType:null})}:void 0,history:this.history,states:Tt(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(q)})),entry:this.entry.map(q),exit:this.exit.map(q),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return D(this,"invoke",()=>x(this.config.invoke).map((t,n)=>{const{src:s,systemId:i}=t,r=t.id??Et(this.id,n),o=typeof s=="string"?s:`xstate.invoke.${Et(this.id,n)}`;return{...t,src:o,id:r,systemId:i,toJSON(){const{onDone:c,onError:u,...d}=t;return{...d,type:"xstate.invoke",src:o,id:r}}}}))}get on(){return D(this,"on",()=>[...this.transitions].flatMap(([n,s])=>s.map(i=>[n,i])).reduce((n,[s,i])=>(n[s]=n[s]||[],n[s].push(i),n),{}))}get after(){return D(this,"delayedTransitions",()=>$e(this))}get initial(){return D(this,"initial",()=>Oe(this,this.config.initial))}next(t,n){const s=n.type,i=[];let r;const o=D(this,`candidates-${s}`,()=>De(this,s));for(const c of o){const{guard:u}=c,d=t.context;let p=!1;try{p=!u||Y(u,d,n,t)}catch(f){const a=typeof u=="string"?u:typeof u=="object"?u.type:void 0;throw new Error(`Unable to evaluate guard ${a?`'${a}' `:""}in transition for event '${s}' in state node '${this.id}':
${f.message}`)}if(p){i.push(...c.actions),r=c;break}}return r?[r]:void 0}get events(){return D(this,"events",()=>{const{states:t}=this,n=new Set(this.ownEvents);if(t)for(const s of Object.keys(t)){const i=t[s];if(i.states)for(const r of i.events)n.add(`${r}`)}return Array.from(n)})}get ownEvents(){const t=Object.keys(Object.fromEntries(this.transitions)),n=new Set(t.filter(s=>this.transitions.get(s).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(n)}}const an="#";class vt{constructor(t,n){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:n?.actors??{},actions:n?.actions??{},delays:n?.delays??{},guards:n?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new H(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:n,guards:s,actors:i,delays:r}=this.implementations;return new vt(this.config,{actions:{...n,...t.actions},guards:{...s,...t.guards},actors:{...i,...t.actors},delays:{...r,...t.delays}})}resolveState(t){const n=Xe(this.root,t.value),s=W(G(this.root,n));return F({_nodes:[...s],context:t.context||{},children:{},status:pt(s,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,n,s){return V(t,n,s,[]).snapshot}microstep(t,n,s){return V(t,n,s,[]).microstates}getTransitionData(t,n){return yt(this.root,t.value,t,n)||[]}getPreInitialState(t,n,s){const{context:i}=this.config,r=F({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?R(r,n,t,[S(({spawn:c,event:u,self:d})=>i({spawn:c,input:u.input,self:d}))],s,void 0):r}getInitialSnapshot(t,n){const s=Rt(n),i=[],r=this.getPreInitialState(t,s,i),o=it([{target:[...Ut(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],r,t,s,!0,i),{snapshot:c}=V(o,s,t,i);return c}start(t){Object.values(t.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(t){const n=at(t),s=n.slice(1),i=K(n[0])?n[0].slice(an.length):n[0],r=this.idMap.get(i);if(!r)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return U(r,s)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,n){return en(t,n)}restoreSnapshot(t,n){const s={},i=t.children;Object.keys(i).forEach(f=>{const a=i[f],l=a.snapshot,h=a.src,y=typeof h=="string"?ut(this,h):h;if(!y)return;const g=L(y,{id:f,parent:n.self,syncSnapshot:a.syncSnapshot,snapshot:l,src:h,systemId:a.systemId});s[f]=g});function r(f,a){if(a instanceof H)return a;try{return f.machine.getStateNodeById(a.id)}catch{}}function o(f,a){if(!a||typeof a!="object")return{};const l={};for(const h in a){const y=a[h];for(const g of y){const I=r(f,g);I&&(l[h]??=[],l[h].push(I))}}return l}const c=o(this.root,t.historyValue),u=F({...t,children:s,_nodes:Array.from(W(G(this.root,t.value))),historyValue:c},this),d=new Set;function p(f,a){if(!d.has(f)){d.add(f);for(const l in f){const h=f[l];if(h&&typeof h=="object"){if("xstate$$type"in h&&h.xstate$$type===ft){f[l]=a[h.id];continue}p(h,a)}}}}return p(u.context,s),u}}function un(e,t,n,s,{event:i}){const r=typeof i=="function"?i(n,s):i;return[t,{event:r},void 0]}function fn(e,{event:t}){e.defer(()=>e.emit(t))}function Zt(e){function t(n,s){}return t.type="xstate.emit",t.event=e,t.resolve=un,t.execute=fn,t}let rt=(function(e){return e.Parent="#_parent",e.Internal="#_internal",e})({});function dn(e,t,n,s,{to:i,event:r,id:o,delay:c},u){const d=t.machine.implementations.delays;if(typeof r=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${r}" }) instead`);const p=typeof r=="function"?r(n,s):r;let f;if(typeof c=="string"){const h=d&&d[c];f=typeof h=="function"?h(n,s):h}else f=typeof c=="function"?c(n,s):c;const a=typeof i=="function"?i(n,s):i;let l;if(typeof a=="string"){if(a===rt.Parent?l=e.self._parent:a===rt.Internal?l=e.self:a.startsWith("#_")?l=t.children[a.slice(2)]:l=u.deferredActorIds?.includes(a)?a:t.children[a],!l)throw new Error(`Unable to send event to actor '${a}' from machine '${t.machine.id}'.`)}else l=a||e.self;return[t,{to:l,targetId:typeof a=="string"?a:void 0,event:p,id:o,delay:f},void 0]}function ln(e,t,n){typeof n.to=="string"&&(n.to=t.children[n.to])}function hn(e,t){e.defer(()=>{const{to:n,event:s,delay:i,id:r}=t;if(typeof i=="number"){e.system.scheduler.schedule(e.self,n,s,i,r);return}e.system._relay(e.self,n,s.type===le?Mt(e.self.id,s.data):s)})}function _t(e,t,n){function s(i,r){}return s.type="xstate.sendTo",s.to=e,s.event=t,s.id=n?.id,s.delay=n?.delay,s.resolve=dn,s.retryResolve=ln,s.execute=hn,s}function pn(e,t){return _t(rt.Parent,e,t)}function yn(e,t,n,s,{collect:i}){const r=[],o=function(u){r.push(u)};return o.assign=(...c)=>{r.push(S(...c))},o.cancel=(...c)=>{r.push(dt(...c))},o.raise=(...c)=>{r.push(mt(...c))},o.sendTo=(...c)=>{r.push(_t(...c))},o.sendParent=(...c)=>{r.push(pn(...c))},o.spawnChild=(...c)=>{r.push(lt(...c))},o.stopChild=(...c)=>{r.push(X(...c))},o.emit=(...c)=>{r.push(Zt(...c))},i({context:n.context,event:n.event,enqueue:o,check:c=>Y(c,t.context,n.event,t),self:e.self,system:e.system},s),[t,void 0,r]}function gn(e){function t(n,s){}return t.type="xstate.enqueueActions",t.collect=e,t.resolve=yn,t}function mn(e,t,n,s,{value:i,label:r}){return[t,{value:typeof i=="function"?i(n,s):i,label:r},void 0]}function vn({logger:e},{value:t,label:n}){n?e(n,t):e(t)}function _n(e=({context:n,event:s})=>({context:n,event:s}),t){function n(s,i){}return n.type="xstate.log",n.value=e,n.label=t,n.resolve=mn,n.execute=vn,n}function bn(e,t){return new vt(e,t)}function Nt({schemas:e,actors:t,actions:n,guards:s,delays:i}){return{assign:S,sendTo:_t,raise:mt,log:_n,cancel:dt,stopChild:X,enqueueActions:gn,emit:Zt,spawnChild:lt,createStateConfig:r=>r,createAction:r=>r,createMachine:r=>bn({...r,schemas:e},{actors:t,actions:n,guards:s,delays:i}),extend:r=>Nt({schemas:e,actors:t,actions:{...n,...r.actions},guards:{...s,...r.guards},delays:{...i,...r.delays}})}}function Sn(e){return ct(e.map(t=>t.value))}const ot=[{label:"Cat / Feline",value:"cat"},{label:"Dog / Canine",value:"dog"}];Sn(ot);const xn=v(ct(ot.map(e=>e.value)),{label:"Breed",options:ot.map(e=>({label:e.label,value:e.value})),placeholder:"Select a breed"}),wn=v(P().regex(/^FR\d{4}$/u,"Identifier must be FR and 4 digits"),{label:"Pet identifier",placeholder:"FR0000"}),Tn=B(J({identifier:wn,name:v(P().min(1,"Pet name is required"),{label:"Name",placeholder:"Enter pet name"}),age:re,breed:xn,knowsParent:v(O().optional(),{label:"I know the mother"}),parentIdentifier:v(P(),{dependsOn:"knowsParent",label:"Mother identifier",placeholder:"Enter pet ID or microchip number"})}),{title:"1. Animal Details"}),En=B(J({exerciseRoutine:v(P().min(1,"Exercise routine is required"),{label:"Exercise Routine",placeholder:"Describe daily exercise habits"}),onDiet:v(O().optional(),{label:"Is your dog on a diet?"})}),{title:"2. Dog Details"}),An=B(J({weight:v(te().min(1,"Weight must be greater than 1 kg"),{label:"Weight (kg)",placeholder:"Enter weight"}),onDiet:v(O().optional(),{label:"Is your cat on a diet?"})}),{title:"2. Cat Details"}),In=B(J({dietFrequency:v(ct(["daily","weekly"]),{label:"Diet Frequency"}),isVegan:v(O().optional(),{label:"Is the diet vegan?"})}),{title:"2b. Diet Details"}),kn=B(J({isAllergicToPeanuts:v(O().optional(),{label:"Allergic to peanuts?"}),isAllergicToSeafood:v(O().optional(),{label:"Allergic to seafood?"}),allergiesDocument:v(ee().optional(),{label:"Upload allergies document",description:"Upload any relevant medical documents regarding allergies.",placeholder:"Select a file"})}),{title:"3. Allergies & Parent Info"}),Dn=Nt({guards:{isCat:({context:e})=>e.formData.breed==="cat",isDog:({context:e})=>e.formData.breed==="dog",isOnDiet:({context:e})=>e.formData.onDiet===!0,isNotOnDiet:({context:e})=>e.formData.onDiet===!1,isDietFilled:({context:e})=>e.formData.dietFrequency!==void 0}}).createMachine({context:({input:e})=>({formData:e?.formData??{},schemas:[]}),id:"Book appointment form",initial:"Step 1 : Animal details",states:{"Step 1 : Animal details":{entry:S({schemas:({context:e})=>e.schemas.concat(Tn)}),always:[{target:"Step 2 : Dog details",guard:{type:"isDog"}},{target:"Step 2 : Cat details",guard:{type:"isCat"}}]},"Step 2 : Dog details":{entry:S({schemas:({context:e})=>e.schemas.concat(En)}),always:[{target:"Step 2b : The diet",guard:{type:"isOnDiet"}},{target:"Step 3 : Allergies",guard:{type:"isNotOnDiet"}}]},"Step 2 : Cat details":{entry:S({schemas:({context:e})=>e.schemas.concat(An)}),always:[{target:"Step 2b : The diet",guard:{type:"isOnDiet"}},{target:"Step 3 : Allergies",guard:{type:"isNotOnDiet"}}]},"Step 2b : The diet":{entry:S({schemas:({context:e})=>e.schemas.concat(In)}),always:[{target:"Step 3 : Allergies",guard:{type:"isDietFilled"}}]},"Step 3 : Allergies":{entry:S({schemas:({context:e})=>e.schemas.concat(kn)}),type:"final"}}});function $n(e,t){const[n,s]=bt.useState([]);return bt.useEffect(()=>{const r=L(e,{input:{formData:t}});function o(u){s(u.context.schemas)}const c=r.subscribe(o);return r.start(),()=>{c.unsubscribe(),r.stop()}},[t,e]),n}const Cn=[{data:{},label:"Case A: Empty input"},{data:{breed:"dog"},label:"Case B: Dog breed selected"},{data:{breed:"dog",onDiet:!0},label:"Case C: Dog breed selected on diet"},{data:{breed:"cat",onDiet:!1},label:"Case D: Cat breed selected not on diet"},{data:{breed:"dog",dietFrequency:"daily",onDiet:!0},label:"Case E: Dog breed selected on diet with diet frequency"},{data:{age:"FROM-5-TO-10",allergiesDocument:new File(["allergies-foobar-content"],"allergies.pdf",{type:"application/pdf"}),breed:"dog",dietFrequency:"daily",exerciseRoutine:"daily walks",identifier:"FR1234",isAllergicToPeanuts:!0,isAllergicToSeafood:!1,isVegan:!1,name:"Buddy",onDiet:!0},label:"Case F: Completely filled"}];function On({initialData:e}){const t=$n(Dn,e),n=()=>ie("success","Appointment booked successfully!");return b.jsxs("div",{className:"flex flex-col gap-4",children:[t.length>0&&b.jsx(ne,{initialData:e,onSubmit:n,schemas:t,showLastStep:!0,showMenu:!0,useSubmissionStep:!0,useSummaryStep:!0}),b.jsx(se,{data:e,isGhost:!0,title:"Initial data"})]})}const Pn=Qt(function(){return b.jsxs("div",{className:"flex flex-col gap-8",children:[b.jsx(St,{className:"text-center",variant:"primary",children:"Book an appointment with Dr. Nicolas JohnRom"}),Object.values(Cn).map(t=>b.jsxs("div",{className:"grid gap-4 mb-6",children:[b.jsx(St,{level:2,children:t.label}),b.jsx(On,{initialData:t.data})]},t.label))]})});export{Pn as default};
